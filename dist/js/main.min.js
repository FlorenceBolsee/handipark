"use strict";var marker,map,z,roundMarker={path:"M-10,0a10,10 0 1,0 20,0a10,10 0 1,0 -20,0",fillColor:"tomato",fillOpacity:1,scale:1.5,strokeWeight:0},markerPos={lat:50.8488051,lng:4.4045959},markers=[];function initMap(){map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:50.8488051,lng:4.4045959},gestureHandling:"cooperative",clickableIcons:!1}),google.maps.event.addListener(map,"zoom_changed",function(){z=map.getZoom()})}function createMarker(e,t){marker=new google.maps.Marker({position:e,map:map,icon:t}),markers.push(marker),marker.addListener("click",function(){null!=this.getMap()&&(12<z?(map.setZoom(12),map.setCenter({lat:50.8488051,lng:4.4045959})):(map.setZoom(15),map.setCenter(this.getPosition())))})}var i,markersList=[],clusterStyles=[{textColor:"white",url:"../img/cluster-small.svg",height:50,width:50,backgroundPosition:"center center"},{textColor:"white",url:"../img/cluster-medium.svg",height:70,width:70,backgroundPosition:"center center"},{textColor:"white",url:"../img/cluster-large.svg",height:90,width:90,backgroundPosition:"center center"}],mcOptions={gridSize:50,styles:clusterStyles,maxZoom:15},markersAjaxCall=new Vue({el:"header",mounted:function(){axios.get("https://handikapapp.azurewebsites.net/api/RData").then(function(e){for(markersList=e.data,console.log(markersList),initMap(),i=0;i<markersList.length;i++)0===markersList[i].Available?(console.log("not available"),roundMarker.fillColor="limegreen"):(console.log("available"),roundMarker.fillColor="tomato"),markerPos.lat=parseFloat(markersList[i].Latitude),markerPos.lng=parseFloat(markersList[i].Longitude),createMarker(markerPos,roundMarker);new MarkerClusterer(map,markers,mcOptions)}).catch(function(){alert("error")})}}),form=new Vue({el:"#form",data:{search:"Complexe Sportif Poseidon",latitude:"",longitude:"",active:!0,message:""},watch:{search:function(){this.latitude="",this.longitude="",this.active=!0,3<=this.search.length&&(this.active=!1,this.lookupCoordinates())}},methods:{lookupCoordinates:_.debounce(function(){var t=this;axios.get("https://maps.googleapis.com/maps/api/geocode/json?address="+t.search).then(function(e){t.latitude=e.data.results[0].geometry.location.lat,t.longitude=e.data.results[0].geometry.location.lng,map.setZoom(15),map.setCenter({lat:t.latitude,lng:t.longitude})}).catch(function(e){t.message="Invalid place"})},500)}});